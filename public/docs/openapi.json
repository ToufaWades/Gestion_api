{
    "openapi": "3.0.0",
    "info": {
        "title": "Compte API",
        "version": "v1",
        "description": "Documentater et ajouter nos endpoints OpenAPI."
    },
    "servers": [
        { "url": "https://gestion-api-dki3.onrender.com/docs" },
        { "url": "http://localhost:8000" }
    ],
    "paths": {
        "/api/v1/login": {
            "post": {

                "summary": "Connexion utilisateur (activation client)",
                "description": "Permet à un utilisateur de se connecter. Pour un client nouvellement créé, la première connexion nécessite le code d'activation reçu par email/SMS en plus du mot de passe. Après activation, le client devient actif et le code n'est plus demandé.",
                "tags": ["Authentication"],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": ["email", "password"],
                                "properties": {
                                    "email": {"type": "string", "format": "email"},
                                    "password": {"type": "string"},
                                    "activation_code": {"type": "string", "description": "Requis uniquement pour la première connexion client"}
                                }
                            },
                            "example": {
                                "email": "user2@gmail.com",
                                "password": "password",
                                "activation_code": "123456"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Connexion réussie",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {"type": "boolean", "example": true},
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "user": {"type": "object"},
                                                "token": {"type": "string", "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},
                                                "role": {"type": "string", "example": "client"}
                                            }
                                        }
                                    }
                                },
                                "example": {
                                    "success": true,
                                    "data": {
                                        "user": {"id": 1, "email": "user1@gmail.com", "role": "client"},
                                        "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                                        "role": "client"
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Identifiants invalides ou code d'activation incorrect",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {"type": "boolean", "example": false},
                                        "error": {
                                            "type": "object",
                                            "properties": {
                                                "code": {"type": "string", "example": "AUTH_ERROR"},
                                                "message": {"type": "string", "example": "Identifiants invalides ou code d'activation incorrect"},
                                                "details": {"type": "object", "example": {"email": ["Invalid credentials."]}}
                                            }
                                        }
                                    }
                                },
                                "example": {
                                    "success": false,
                                    "error": {
                                        "code": "AUTH_ERROR",
                                        "message": "Identifiants invalides ou code d'activation incorrect",
                                        "details": {"email": ["Invalid credentials."]}
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/comptes": {
            "post": {
                "security": [{"bearerAuth": []}],
                "summary": "Créer un compte bancaire avec client",
                "description": "Crée un utilisateur, un client et un compte bancaire avec validation stricte, génération mot de passe/code, envoi mail/SMS.",
                "tags": ["Comptes"],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": ["type", "soldeInitial", "devise", "solde", "client"],
                                "properties": {
                                    "type": { "type": "string", "enum": ["cheque", "epargne"] },
                                    "soldeInitial": { "type": "number", "minimum": 10000 },
                                    "devise": { "type": "string", "enum": ["FCFA", "XOF"] },
                                    "solde": { "type": "number", "minimum": 0 },
                                    "client": {
                                        "type": "object",
                                        "required": ["titulaire", "email", "telephone", "adresse"],
                                        "properties": {
                                            "id": { "type": "integer", "nullable": true },
                                            "titulaire": { "type": "string" },
                                            "email": { "type": "string", "format": "email" },
                                            "telephone": { "type": "string", "pattern": "^\\+2217[0-9]{7,8}$" },
                                            "adresse": { "type": "string" }
                                        }
                                    }
                                }
                            },
                            "example": {
                                "type": "cheque",
                                "soldeInitial": 500000,
                                "devise": "FCFA",
                                "solde": 10000,
                                "client": {
                                    "id": null,
                                    "titulaire": "Hawa BB Wane",
                                    "email": "cheikh.sy@example.com",
                                    "telephone": "+221771234567",
                                    "adresse": "Dakar, Sénégal"
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Compte créé avec succès",
                        "content": {
                            "application/json": {
                                "schema": { "$ref": "#/components/schemas/AccountCreationSuccess" }
                            }
                        }
                    },
                    "400": {
                        "description": "Données invalides",
                        "content": {
                            "application/json": {
                                "schema": { "$ref": "#/components/schemas/ValidationError" }
                            }
                        }
                    }
                }
            },
            "get": {
                "security": [{"bearerAuth": []}],
                "summary": "Lister tous les comptes",
                "description": "Récupère une liste paginée de comptes avec possibilité de filtrage et tri",
                "tags": ["Comptes"],
                "parameters": [
                    { "name": "page", "in": "query", "schema": { "type": "integer", "default": 1 }, "description": "Numéro de page" },
                    { "name": "limit", "in": "query", "schema": { "type": "integer", "default": 10 }, "description": "Nombre d'éléments par page" },
                    { "name": "type", "in": "query", "schema": { "type": "string", "enum": ["epargne", "cheque"] }, "description": "Filtrer par type de compte" },
                    { "name": "statut", "in": "query", "schema": { "type": "string", "enum": ["actif", "bloque", "ferme"] }, "description": "Filtrer par statut" },
                    { "name": "search", "in": "query", "schema": { "type": "string" }, "description": "Recherche par numéro de compte ou nom du titulaire" },
                    { "name": "sort", "in": "query", "schema": { "type": "string", "enum": ["date_creation", "solde", "titulaire_compte"], "default": "date_creation" }, "description": "Champ de tri (utilisez les clés exactes: date_creation, solde, titulaire_compte)" },
                    { "name": "order", "in": "query", "schema": { "type": "string", "enum": ["asc", "desc"], "default": "desc" }, "description": "Ordre de tri" }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des comptes récupérée avec succès",
                        "content": {
                            "application/json": {
                                "schema": { "$ref": "#/components/schemas/ComptesResponse" }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/clients/change-password": {
            "post": {
                "security": [{"bearerAuth": []}],
                "summary": "Changer le mot de passe (protégé)",
                "tags": ["Authentication"],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": ["old_password", "new_password", "new_password_confirmation"],
                                "properties": {
                                    "old_password": { "type": "string" },
                                    "new_password": { "type": "string" },
                                    "new_password_confirmation": { "type": "string" }
                                }
                            },
                            "example": {
                                "old_password": "ancienmotdepasse",
                                "new_password": "nouveaumotdepasse",
                                "new_password_confirmation": "nouveaumotdepasse"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Mot de passe changé avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": { "type": "string", "example": "Mot de passe changé avec succès" }
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Ancien mot de passe incorrect"
                    }
                }
            }
        },
        "/api/v1/users/clients": {
            "get": {
                "security": [{"bearerAuth": []}],
                "summary": "Lister tous les clients",
                "tags": ["Users"],
                "responses": {
                    "200": {
                        "description": "Liste des clients",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": { "type": "boolean" },
                                        "data": { "type": "array", "items": { "$ref": "#/components/schemas/UserWithClient" } },
                                        "pagination": { "$ref": "#/components/schemas/Pagination" }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/users/admins": {
            "get": {
                "security": [{"bearerAuth": []}],
                "summary": "Lister tous les admins",
                "tags": ["Users"],
                "responses": {
                    "200": {
                        "description": "Liste des admins",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": { "type": "boolean" },
                                        "data": { "type": "array", "items": { "$ref": "#/components/schemas/UserWithAdmin" } },
                                        "pagination": { "$ref": "#/components/schemas/Pagination" }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/users/client": {
            "get": {
                "security": [{"bearerAuth": []}],
                "summary": "Trouver un client par téléphone ou NCI",
                "tags": ["Users"],
                "parameters": [
                    { "name": "telephone", "in": "query", "required": false, "schema": { "type": "string" }, "description": "Numéro de téléphone du client" },
                    { "name": "nci", "in": "query", "required": false, "schema": { "type": "string" }, "description": "NCI du client" }
                ],
                "responses": {
                    "200": {
                        "description": "Client trouvé",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": { "type": "boolean" },
                                        "data": { "$ref": "#/components/schemas/UserWithClient" }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Client non trouvé"
                    }
                }
            }
        },
        "/api/v1/comptes/{numeroCompte}": {
            "get": {
                "security": [{"bearerAuth": []}],
                "summary": "Récupérer un compte par son numéro",
                "tags": ["Comptes"],
                "parameters": [
                    { "name": "numeroCompte", "in": "path", "required": true, "schema": { "type": "string" }, "description": "Numéro de compte (numero_compte)" }
                ],
                "responses": {
                    "200": {
                        "description": "Compte récupéré",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": { "type": "boolean" },
                                        "data": { "$ref": "#/components/schemas/Compte" }
                                    }
                                }
                            }
                        }
                    },
                    "403": { "description": "Accès refusé" },
                    "404": {
                        "description": "Compte introuvable",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": { "type": "boolean", "example": false },
                                        "error": {
                                            "type": "object",
                                            "properties": {
                                                "code": { "type": "string", "example": "COMPTE_NOT_FOUND" },
                                                "message": { "type": "string", "example": "Le compte C00123456 est introuvable" }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/comptes/{compteId}": {
            "patch": {
                "security": [{"bearerAuth": []}],
                "summary": "Mettre à jour les informations d'un compte client existant",
                "description": "Met à jour partiellement les informations d'un compte existant. Tous les champs sont optionnels, mais au moins un champ doit être fourni. Validation stricte sur téléphone, email et mot de passe. Seul le client propriétaire ou l'admin peut modifier.",
                "tags": ["Comptes"],
                "parameters": [
                    {
                        "name": "compteId",
                        "in": "path",
                        "required": true,
                        "schema": {"type": "string"},
                        "description": "ID du compte à mettre à jour"
                    }
                ],
                "requestBody": {
                    "required": true,
                                    "/api/v1/comptes": {
                                        "post": {
                                            "security": [{"bearerAuth": []}],
                                            "summary": "Créer un compte bancaire avec client",
                                            "description": "Crée un utilisateur, un client et un compte bancaire avec validation stricte.",
                                            "tags": ["Comptes"],
                                            "requestBody": {
                                                "required": true,
                                                "content": {
                                                    "application/json": {
                                                        "schema": {
                                                            "type": "object",
                                                            "required": ["type", "soldeInitial", "devise", "solde", "client"],
                                                            "properties": {
                                                                "type": { "type": "string", "enum": ["cheque", "epargne"] },
                                                                "soldeInitial": { "type": "number", "minimum": 10000 },
                                                                "devise": { "type": "string", "enum": ["FCFA", "XOF"] },
                                                                "solde": { "type": "number", "minimum": 0 },
                                                                "client": {
                                                                    "type": "object",
                                                                    "required": ["titulaire", "nci", "email", "telephone", "adresse"],
                                                                    "properties": {
                                                                        "id": { "type": "integer", "nullable": true },
                                                                        "titulaire": { "type": "string" },
                                                                        "nci": { "type": "string", "pattern": "^[12][0-9]{12}$" },
                                                                        "email": { "type": "string", "format": "email" },
                                                                        "telephone": { "type": "string", "pattern": "^\\+221(77|78|70|76|75)[0-9]{7}$" },
                                                                        "adresse": { "type": "string" }
                                                                    }
                                                                }
                                                            }
                                                        },
                                                        "example": {
                                                            "type": "cheque",
                                                            "soldeInitial": 190000,
                                                            "devise": "FCFA",
                                                            "solde": 270000,
                                                            "client": {
                                                                "id": 2,
                                                                "titulaire": "Toufa Wade",
                                                                "nci": "1234567890170",
                                                                "email": "toufaW2025@example.com",
                                                                "telephone": "+221771236789",
                                                                "adresse": "Thies, Sénégal"
                                                            }
                                                        }
                                                    }
                                                }
                                            },
                                            "responses": {
                                                "201": {
                                                    "description": "Compte créé avec succès",
                                                    "content": {
                                                        "application/json": {
                                                            "schema": { "$ref": "#/components/schemas/AccountCreationSuccess" }
                                                        }
                                                    }
                                                },
                                                "400": {
                                                    "description": "Données invalides"
                                                }
                                            }
                                        }
                                    },
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "titulaire": {"type": "string", "description": "Nom du titulaire"},
                                    "informationsClient": {
                                        "type": "object",
                                        "properties": {
                                            "telephone": {"type": "string", "description": "Numéro portable sénégalais (+2217XXXXXXX)"},
                                            "email": {"type": "string", "format": "email", "description": "Email unique et valide"},
                                            "password": {"type": "string", "description": "Mot de passe sécurisé"}
                                        }
                                    }
                                }
                            },
                            "example": {
                                "titulaire": "Sokhna thiam",
                                "informationsClient": {
                                    "telephone": "+221771234568",
                                    "email": "",
                                    "password": ""
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Compte mis à jour avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {"type": "boolean", "example": true},
                                        "message": {"type": "string", "example": "Compte mis à jour avec succès"},
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "id": {"type": "string", "example": "550e8400-e29b-41d4-a716-446655440000"},
                                                "numeroCompte": {"type": "string", "example": "C00123456"},
                                                "titulaire": {"type": "string", "example": "Amadou Diallo Junior"},
                                                "type": {"type": "string", "example": "epargne"},
                                                "solde": {"type": "number", "example": 1250000},
                                                "devise": {"type": "string", "example": "FCFA"},
                                                "dateCreation": {"type": "string", "format": "date-time", "example": "2023-03-15T00:00:00Z"},
                                                "statut": {"type": "string", "example": "bloque"},
                                                "metadata": {
                                                    "type": "object",
                                                    "properties": {
                                                        "derniereModification": {"type": "string", "format": "date-time", "example": "2025-10-19T11:00:00Z"},
                                                        "version": {"type": "integer", "example": 1}
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {"description": "Accès non autorisé"},
                    "404": {"description": "Compte introuvable"},
                                    "/api/v1/clients/change-password": {
                                        "post": {
                                            "security": [{"bearerAuth": []}],
                                            "summary": "Changer le mot de passe (protégé)",
                                            "tags": ["Auth"],
                                            "requestBody": {
                                                "required": true,
                                                "content": {
                                                    "application/json": {
                                                        "schema": {
                                                            "type": "object",
                                                            "required": ["old_password", "new_password", "new_password_confirmation"],
                                                            "properties": {
                                                                "old_password": { "type": "string" },
                                                                "new_password": { "type": "string" },
                                                                "new_password_confirmation": { "type": "string" }
                                                            }
                                                        },
                                                        "example": {
                                                            "old_password": "ancienmotdepasse",
                                                            "new_password": "nouveaumotdepasse",
                                                            "new_password_confirmation": "nouveaumotdepasse"
                                                        }
                                                    }
                                                }
                                            },
                                            "responses": {
                                                "200": {
                                                    "description": "Mot de passe changé avec succès",
                                                    "content": {
                                                        "application/json": {
                                                            "schema": {
                                                                "type": "object",
                                                                "properties": {
                                                                    "message": { "type": "string", "example": "Mot de passe changé avec succès" }
                                                                }
                                                            }
                                                        }
                                                    }
                                                },
                                                "422": {
                                                    "description": "Ancien mot de passe incorrect"
                                                }
                                            }
                                        }
                                    },
                                    "/api/v1/users/clients": {
                                        "get": {
                                            "security": [{"bearerAuth": []}],
                                            "summary": "Lister tous les clients",
                                            "tags": ["Users"],
                                            "responses": {
                                                "200": {
                                                    "description": "Liste des clients",
                                                    "content": {
                                                        "application/json": {
                                                            "schema": {
                                                                "type": "object",
                                                                "properties": {
                                                                    "success": { "type": "boolean" },
                                                                    "data": { "type": "array", "items": { "$ref": "#/components/schemas/UserWithClient" } },
                                                                    "pagination": { "$ref": "#/components/schemas/Pagination" }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    },
                                    "/api/v1/users/admins": {
                                        "get": {
                                            "security": [{"bearerAuth": []}],
                                            "summary": "Lister tous les admins",
                                            "tags": ["Users"],
                                            "responses": {
                                                "200": {
                                                    "description": "Liste des admins",
                                                    "content": {
                                                        "application/json": {
                                                            "schema": {
                                                                "type": "object",
                                                                "properties": {
                                                                    "success": { "type": "boolean" },
                                                                    "data": { "type": "array", "items": { "$ref": "#/components/schemas/UserWithAdmin" } },
                                                                    "pagination": { "$ref": "#/components/schemas/Pagination" }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    },
                                    "/api/v1/users/client": {
                                        "get": {
                                            "security": [{"bearerAuth": []}],
                                            "summary": "Trouver un client par téléphone ou NCI",
                                            "tags": ["Users"],
                                            "parameters": [
                                                { "name": "telephone", "in": "query", "required": false, "schema": { "type": "string" }, "description": "Numéro de téléphone du client" },
                                                { "name": "nci", "in": "query", "required": false, "schema": { "type": "string" }, "description": "NCI du client" }
                                            ],
                                            "responses": {
                                                "200": {
                                                    "description": "Client trouvé",
                                                    "content": {
                                                        "application/json": {
                                                            "schema": {
                                                                "type": "object",
                                                                "properties": {
                                                                    "success": { "type": "boolean" },
                                                                    "data": { "$ref": "#/components/schemas/UserWithClient" }
                                                                }
                                                            }
                                                        }
                                                    }
                                                },
                                                "404": {
                                                    "description": "Client non trouvé"
                                                }
                                            }
                                        }
                                    },
                    "422": {
                        "description": "Données invalides ou aucun champ fourni",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {"type": "boolean", "example": false},
                                        "error": {
                                            "type": "object",
                                            "properties": {
                                                "code": {"type": "string", "example": "VALIDATION_ERROR"},
                                                "message": {"type": "string", "example": "Données invalides"},
                                                "details": {"type": "object"}
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "security": [{"bearerAuth": []}],
                "summary": "Supprimer un compte ",
                "description": "Marque le compte comme fermé sans le supprimer physiquement de la base de données. Accessible par l'admin (tous comptes) ou le client (ses propres comptes).",
                "tags": ["Comptes"],
                "parameters": [
                    {
                        "name": "compteId",
                        "in": "path",
                        "required": true,
                        "schema": {"type": "string"},
                        "description": "ID du compte à supprimer (fermer)"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Compte supprimé avec succès (soft delete)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {"type": "boolean", "example": true},
                                        "message": {"type": "string", "example": "Compte supprimé avec succès"},
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "id": {"type": "string", "example": "550e8400-e29b-41d4-a716-446655440000"},
                                                "numeroCompte": {"type": "string", "example": "C00123456"},
                                                "statut": {"type": "string", "example": "ferme"},
                                                "dateFermeture": {"type": "string", "format": "date-time", "example": "2025-10-19T11:15:00Z"}
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {"description": "Accès non autorisé"},
                    "404": {"description": "Compte introuvable"}
                }
            }
        },
        "/api/v1/comptes/{compte}/bloquer": {
            "post": {
                "security": [{"bearerAuth": []}],
                "summary": "Bloquer un compte",
                "tags": ["Comptes"],
                "parameters": [
                    { "name": "compte", "in": "path", "required": true, "schema": { "type": "integer" }, "description": "ID du compte à bloquer" }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": { "$ref": "#/components/schemas/BlocageRequest" },
                            "example": {
                                "date_debut_blocage": "2025-11-14",
                                "date_fin_blocage": "2025-11-15",
                                "motif_blocage": "Suspicion de fraude"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Données de blocage enregistrées",
                        "content": {
                            "application/json": {
                                "schema": { "$ref": "#/components/schemas/BlocageResponse" }
                            }
                        }
                    },
                    "400": { "description": "Données invalides" },
                    "404": { "description": "Compte introuvable" }
                }
            }
        },
        "/api/v1/comptes/numero/{numero}/bloquer": {
            "post": {
                "security": [{"bearerAuth": []}],
                "summary": "Bloquer un compte par numéro ",
                "tags": ["Comptes"],
                "parameters": [
                    { "name": "numero", "in": "path", "required": true, "schema": { "type": "string" }, "description": "Numéro de compte (numero_compte)" }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": { "$ref": "#/components/schemas/BlocageRequest" },
                            "example": {
                                "date_debut_blocage": "2025-11-14",
                                "date_fin_blocage": "2025-11-15",
                                "motif_blocage": "Suspicion de fraude"
                            }
                        }
                    }
                },
                "responses": {
                    "200": { "description": "Données de blocage enregistrées", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/BlocageResponse" } } } },
                    "400": { "description": "Données invalides" },
                    "404": { "description": "Compte introuvable" }
                }
            }
        },
        "/api/v1/users/client/telephone/{telephone}": {
            "get": {
                "security": [{"bearerAuth": []}],
                "summary": "Récupérer un client par numéro de téléphone",
                "tags": ["Users"],
                "parameters": [
                    { "name": "telephone", "in": "path", "required": true, "schema": { "type": "string" }, "description": "Numéro de téléphone du client" }
                ],
                "responses": {
                    "200": {
                        "description": "Client trouvé",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": { "type": "boolean" },
                                        "data": { "type": "object" }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Client introuvable",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": { "type": "boolean", "example": false },
                                        "error": {
                                            "type": "object",
                                            "properties": {
                                                "code": { "type": "string", "example": "CLIENT_NOT_FOUND" },
                                                "message": { "type": "string", "example": "Aucun client trouvé avec ce numéro" }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "JWT"
            }
        },
        "schemas": {
            "Compte": {
                "type": "object",
                "properties": {
                    "id": { "type": "string", "format": "uuid" },
                    "numeroCompte": { "type": "string" },
                    "titulaire": { "type": "string" },
                    "type": { "type": "string", "enum": ["epargne", "cheque"] },
                    "solde": { "type": "number" },
                    "devise": { "type": "string" },
                    "dateCreation": { "type": "string", "format": "date-time" },
                    "statut": { "type": "string", "enum": ["actif", "bloque", "ferme"] },
                    "dateDebutBlocage": { "type": "string", "format": "date", "nullable": true },
                    "dateFinBlocage": { "type": "string", "format": "date", "nullable": true },
                    "motifBlocage": { "type": "string", "nullable": true },
                    "archived": { "type": "boolean", "nullable": true },
                    "metadonnees": { "type": "object", "properties": { "derniereModification": { "type": "string", "format": "date-time" }, "version": { "type": "integer" } } }
                }
            },
            "Pagination": {
                "type": "object",
                "properties": {
                    "currentPage": { "type": "integer" },
                    "totalPages": { "type": "integer" },
                    "totalItems": { "type": "integer" },
                    "itemsPerPage": { "type": "integer" },
                    "hasNext": { "type": "boolean" },
                    "hasPrevious": { "type": "boolean" }
                }
            },
            "ComptesResponse": {
                "type": "object",
                "properties": {
                    "success": { "type": "boolean" },
                    "data": { "type": "array", "items": { "$ref": "#/components/schemas/Compte" } },
                    "pagination": { "$ref": "#/components/schemas/Pagination" },
                    "links": { "$ref": "#/components/schemas/Links" }
                }
            },
            "AccountCreationSuccess": {
                "type": "object",
                "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "Compte créé avec succès" },
                    "data": {
                        "type": "object",
                        "properties": {
                            "id": { "type": "string", "example": "660f9511-f30c-52e5-b827-557766551111" },
                            "numeroCompte": { "type": "string", "example": "C00123460" },
                            "titulaire": { "type": "string", "example": "Cheikh Sy" },
                            "type": { "type": "string", "example": "cheque" },
                            "solde": { "type": "number", "example": 500000 },
                            "devise": { "type": "string", "example": "FCFA" },
                            "dateCreation": { "type": "string", "format": "date-time", "example": "2025-10-19T10:30:00Z" },
                            "statut": { "type": "string", "example": "actif" },
                            "metadata": {
                                "type": "object",
                                "properties": {
                                    "derniereModification": { "type": "string", "format": "date-time", "example": "2025-10-19T10:30:00Z" },
                                    "version": { "type": "integer", "example": 1 }
                                }
                            }
                        }
                    }
                }
            },
            "ValidationError": {
                "type": "object",
                "properties": {
                    "success": { "type": "boolean", "example": false },
                    "error": {
                        "type": "object",
                        "properties": {
                            "code": { "type": "string", "example": "VALIDATION_ERROR" },
                            "message": { "type": "string", "example": "Les données fournies sont invalides" },
                            "details": {
                                "type": "object",
                                "additionalProperties": { "type": "string" },
                                "example": {
                                    "soldeInitial": "Le solde initial doit être supérieur ou égal à 10000"
                                }
                            }
                        }
                    }
                }
            },
            "BlocageResponse": {
                "type": "object",
                "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "Données de blocage enregistrées" },
                    "data": { "$ref": "#/components/schemas/Compte" }
                }
            },
            "ArchiveResponse": {
                "type": "object",
                "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "Compte archivé avec succès" },
                    "data": { "$ref": "#/components/schemas/Compte" }
                }
            },
            "Links": {
                "type": "object",
                "properties": {
                    "self": { "type": "string", "format": "uri" },
                    "next": { "type": "string", "format": "uri", "nullable": true },
                    "prev": { "type": "string", "format": "uri", "nullable": true }
                }
            },
            "UserWithClient": {
                "type": "object",
                "properties": {
                    "id": { "type": "integer" },
                    "nom": { "type": "string" },
                    "prenom": { "type": "string" },
                    "email": { "type": "string", "format": "email" },
                    "telephone": { "type": "string" }
                }
            },
            "UserWithAdmin": {
                "type": "object",
                "properties": {
                    "id": { "type": "integer" },
                    "nom": { "type": "string" },
                    "prenom": { "type": "string" },
                    "email": { "type": "string", "format": "email" },
                    "telephone": { "type": "string" },
                    "role": { "type": "string", "example": "admin" }
                }
            },
            "BlocageRequest": {
                "type": "object",
                "required": ["date_debut_blocage", "date_fin_blocage", "motif_blocage"],
                "properties": {
                    "date_debut_blocage": { "type": "string", "format": "date" },
                    "date_fin_blocage": { "type": "string", "format": "date" },
                    "motif_blocage": { "type": "string" }
                }
            }
        }
    }
}
